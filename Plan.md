# План автоматизации тестирования веб-сервиса покупки туров

## 1. Перечень автоматизируемых сценариев

### 1.1. UI-тесты (форма оплаты по карте / форма кредита)

**Позитивные сценарии:**
- Успешная оплата APPROVED-картой (`1111 2222 3333 4444`)
- Отказ в оплате DECLINED-картой (`5555 6666 7777 8888`)

**Негативные сценарии:**
- Отправка формы с пустыми полями
- Невалидные данные карты:
    - Короткий номер карты
    - Неверный CVC
    - Истёкший срок действия
- Ввод несуществующей карты (не `APPROVED`/`DECLINED`)

### 1.2. Проверка записи в СУБД
- Проверка сохранения данных в таблицах:
    - `payment_entity`
    - `credit_request_entity`
    - `order_entity`


### 1.3. API-тесты (опционально)
- Проверка эндпоинтов, вызываемых после отправки формы

## 2. Перечень инструментов с обоснованием

| Инструмент      | Назначение                | Обоснование                                                           |
|-----------------|---------------------------|-----------------------------------------------------------------------|
| **Selenium**    | UI-автоматизация          | Поддержка браузеров, удобство интеграции с Java                       |
| **JUnit5**      | Фреймворк для тестов      | Гибкость, поддержка параметризованных тестов                          |
| **RestAssured** | API-тестирование          | Удобство работы с HTTP-запросами                                      |
| **Faker**       | Генерация тестовых данных | Генерация случайных тестовых данных для избегания эффекта "Пестицида" |
| **Allure Report** | Отчётность                | Визуализация результатов                                              |
| **Docker**      | Развёртывание БД          | Изоляция тестовой среды (MySQL)                                       |
| **Gradle**      | Сборка проекта            | Управление зависимостями, запуск тестов                               |
| **Appveyor**    | CI (опционально)          | Автоматический прогон тестов                                          |

## 3. Возможные риски

1. **Нестабильность UI-тестов** - из-за задержек рендеринга
2. **Проблемы с доступом к внешнему сервису (Payment/Credit Gate)** - общий сервис может быть перегружен/недоступен
3. **Ошибки в конфигурации БД** - некорректные настройки `application.properties`
4. **Изменение структуры формы** - тесты потребуют доработки
5. **Ограниченные тестовые данные** - только 2 карты (`APPROVED`/`DECLINED`)

## 4. Оценка времени с учётом рисков

| Этап                     | Оптимистично (ч) | Пессимистично (ч) | Итог (ч) |
|--------------------------|------------------|-------------------|----------|
| Настройка окружения      | 4                | 8                 | 6        |
| Написание UI-тестов      | 12               | 20                | 16       |
| Проверка СУБД            | 6                | 10                | 8        |
| Интеграция Allure        | 2                | 4                 | 3        |
| Отчётность               | 4                | 8                 | 6        |
| **Итого**               | **28**           | **50**            | **39**   |

## 5. План сдачи работ

| Этап                          | Срок (дни) | Результат                                  |
|-------------------------------|------------|--------------------------------------------|
| Настройка среды и БД          | 1-2        | Готовность Docker + SUT + тестовой БД      |
| Реализация UI-тестов          | 3-5        | Автотесты для одной формы                  |
| Проверка СУБД + отчёты        | 6          | Allure-отчёт + проверка записей в БД       |
| Финализация документации      | 7          | `Plan.md`, `Report.md`, `Summary.md`       |
| Сдача проекта                 | 8          | Публикация репозитория с тестами и отчётами|

## Примечания

- Возможно упущены некоторые проверки, поскольку внешний сервис в данный момент не доступен.
